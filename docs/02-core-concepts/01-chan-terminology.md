# 缠论术语

本文档介绍缠论的基本术语，帮助理解项目中的概念。

---

## 基础概念

### K线 (KLine)

K线是金融市场中最基本的数据单位，包含：

| 属性 | 说明 |
|------|------|
| open | 开盘价 |
| high | 最高价 |
| close | 收盘价 |
| low | 最低价 |
| volume | 成交量 |

在本项目中：
- **KLineUnit (klu)**: 单根原始K线
- **KLine (klc)**: 合并后的K线（处理了包含关系）

---

### 包含关系

当两根K线的高低点存在包含时，需要合并处理。

```
包含关系示例：

    ┌───┐
    │   │  ┌───┐
    │   │  │   │     K2 被 K1 包含
    │   │  │   │
    │   │  └───┘
    └───┘
     K1      K2
```

合并规则：
- **上升趋势**: 取高点的高值，低点的高值
- **下降趋势**: 取高点的低值，低点的低值

---

### 分形 (Fractal / FX)

分形是识别转折点的基本单位，由连续三根K线（合并后）构成。

#### 顶分形 (Top)
中间K线的高点比两边都高：

```
      ┌───┐
      │ 2 │
┌───┐ │   │ ┌───┐
│ 1 │ │   │ │ 3 │
│   │ └───┘ │   │
└───┘       └───┘
```

#### 底分形 (Bottom)
中间K线的低点比两边都低：

```
┌───┐       ┌───┐
│ 1 │       │ 3 │
│   │ ┌───┐ │   │
└───┘ │ 2 │ └───┘
      │   │
      └───┘
```

---

### 笔 (Bi)

笔是连接顶分形和底分形的线段。

#### 成笔条件
1. 顶底分形之间至少有1根独立K线
2. 顶底分形的高低点关系正确
3. （严格笔）顶底之间至少跨越4根合并K线

#### 笔的方向
- **上升笔**: 从底分形到顶分形
- **下降笔**: 从顶分形到底分形

```
笔示意图：

    高点 ●────────● 高点
        /          \
       /            \
      /              \
     ●                ●
   低点              低点
   
   上升笔           下降笔
```

---

### 线段 (Segment / Seg)

线段由至少3笔构成，是对笔的更高级别抽象。

#### 线段特征
1. 至少包含3笔
2. 线段的方向与第一笔相同
3. 线段有确定和不确定两种状态

```
线段示意图（5笔构成）：

           ●
          /|\
         / | \
        /  |  \
       ●   |   ●
      /|   |   |\
     / |   |   | \
    ●  |   |   |  ●
       |   |   |
   笔1 笔2 笔3 笔4 笔5
```

#### 线段算法
本项目支持多种线段计算方法：
- **chan**: 基于特征序列（默认）
- **break**: 基于线段破坏定义
- **1+1**: 都业华版本终结算法

---

### 中枢 (Zhongshu / ZS)

中枢是多笔重叠形成的价格区间，是走势的核心结构。

#### 中枢定义
至少3笔有价格重叠的区间：

```
中枢示意图：

        ●
       /|\
      / | \        ZG (中枢高点)
─────/──┼──\──────────────────
    /   |   \
   ●    |    ●     中枢区间
    \   |   /
─────\──┼──/──────────────────
      \ | /        ZD (中枢低点)
       \|/
        ●
```

#### 中枢属性
| 属性 | 说明 |
|------|------|
| ZG | 中枢高点（重叠区间的高点） |
| ZD | 中枢低点（重叠区间的低点） |
| GG | 中枢最高点（所有笔的最高） |
| DD | 中枢最低点（所有笔的最低） |

---

### 买卖点 (BSP - Buy Sell Point)

基于走势结构识别的交易信号。

#### 第一类买卖点 (1类)
在一个下跌/上涨趋势中，最后一个中枢之后的背驰点。

```
一类买点示意：

    ●
   / \        中枢
  /   \    ┌───────┐
 ●     \   │       │
        \  │       │
         ● │       │
          \│       │
           ●───────● ← 背驰，一买
```

#### 第二类买卖点 (2类)
一类买卖点后的第一次回调不破一类买卖点。

#### 第三类买卖点 (3类)
离开中枢后的第一次回调不进入中枢。

#### 类二买卖点 (2s)
二类买卖点后的类似结构。

#### 盘整背驰 (1p)
盘整走势中的背驰点。

---

### 背驰

背驰是趋势减弱的信号，用于辅助判断买卖点。

#### 判断方法
本项目支持多种背驰算法：

| 算法 | 说明 |
|------|------|
| peak | MACD柱子最高值 |
| area | MACD面积（同向） |
| full_area | MACD完整面积 |
| slope | 笔的斜率 |
| amp | 笔的涨跌幅 |
| diff | MACD差值 |

---

## 变量命名约定

本项目中的常见缩写：

| 缩写 | 全称 | 说明 |
|------|------|------|
| klu | KLine Unit | 单根K线 |
| klc | KLine Combine | 合并K线 |
| bi | Bi | 笔 |
| seg | Segment | 线段 |
| zs | Zhongshu | 中枢 |
| bsp | Buy Sell Point | 形态学买卖点 |
| cbsp | Custom BSP | 自定义策略买卖点 |
| fx | Fractal | 分形 |

---

## 下一步

- [数据结构](./02-data-structures.md) - 了解代码中的核心类
- [模块详解](../04-modules/) - 深入各个模块

